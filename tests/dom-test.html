<script src="../build/netnet-standard-library.js"></script>
<script>
  /* global nn */

  const bgColor = '#e585ca'
  const gifURL = 'https://netart.rocks/images/butterfly.gif'

  function createGif (gif, x, y, w) {
    nn.create('img')
      .set ('src', `${gif}?r=${nn.random()}`)
      .addTo('body')
      .position(x, y)
      .css({
        width: w,
        transition: 'all 1.5s ease-out'
      })
      .on('mouseover', function (e) {
        this.css('width', 0)
      })
      .on('mouseout', async function () {
        await nn.sleep(1000)
        this.css('width', w)
      })
  }

  function createGifCircle (gif, num, scale, radius) {
    for (let i = 0; i < num; i++) {
      const cx = nn.width / 2 - gif.width / 2
      const cy = nn.height / 2 - gif.height / 2
      const x = cx + Math.sin(i * scale) * radius
      const y = cy + Math.cos(i * scale) * radius
      createGif(gif.src, x, y, gif.width)
    }
  }

  async function setup () {
    nn.get('body').css({ background:  bgColor })
    const gif = await nn.loadImage(gifURL)
    createGifCircle(gif, 22, 0.3, 100)
    await nn.sleep(100)
    createGifCircle(gif, 22, 0.3, 150)
    await nn.sleep(200)
    createGifCircle(gif, 22, 0.3, 200)
  }

  nn.on('load', setup)
  nn.on('resize', setup)

</script>
